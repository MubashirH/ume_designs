jQuery.noConflict();var ddpowerzoomer={dsetting:{defaultpower:2,powerrange:[2,7],magnifiersize:[75,75]},mousewheelevt:/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",$magnifier:{outer:null,inner:null,image:null},activeimage:null,movemagnifier:function(e,i,o){var r=ddpowerzoomer.activeimage.info,t=r.coords,n=ddpowerzoomer.$magnifier,a=r.magdimensions,d=r.power.current,m=r.power.range,s=e.pageX-t.left,g=e.pageY-t.top;if(1==i)e.pageX>=t.left&&e.pageX<=t.right&&e.pageY>=t.top&&e.pageY<=t.bottom?n.outer.css({left:e.pageX-a[0]/2,top:e.pageY-a[1]/2}):(ddpowerzoomer.activeimage=null,n.outer.hide());else if(o){var p=r.dimensions,u="in"==o?Math.min(d+1,m[1]):Math.max(d-1,m[0]),l=[p[0]*u,p[1]*u];n.image.css({width:l[0],height:l[1]}),r.power.current=u}var f=-s*(d=r.power.current)+a[0]/2,c=-g*d+a[1]/2;n.inner.css({left:f,top:c})},setupimage:function(e,i,o){var r=jQuery.extend({},ddpowerzoomer.dsetting,o),t=e(i);i.info={power:{current:r.defaultpower,range:r.powerrange},magdimensions:r.magnifiersize,dimensions:[t.width(),t.height()],coords:null},t.unbind("mouseenter").mouseenter(function(e){var n=ddpowerzoomer.$magnifier;n.outer.css({width:r.magnifiersize[0],height:r.magnifiersize[1]});var a=t.offset(),d=i.info.power.current;n.inner.html('<img src="'+o.largeimagesrc+'"/>'),n.image=n.outer.find("img:first").css({width:i.info.dimensions[0]*d,height:i.info.dimensions[1]*d});var m={left:a.left,top:a.top,right:a.left+i.info.dimensions[0],bottom:a.top+i.info.dimensions[1]};i.info.coords=m,n.outer.show(),ddpowerzoomer.activeimage=i})},init:function(e){var i=e('<div style="position:absolute;width:100px;height:100px;display:none;overflow:hidden;border:1px solid black;z-index:1000" />').append('<div style="position:relative;left:0;top:0;" />').appendTo(document.body);ddpowerzoomer.$magnifier={outer:i,inner:i.find("div:eq(0)"),image:null},i=ddpowerzoomer.$magnifier,e(document).unbind("mousemove.trackmagnifier").bind("mousemove.trackmagnifier",function(e){ddpowerzoomer.activeimage&&ddpowerzoomer.movemagnifier(e,!0)}),i.outer.bind(ddpowerzoomer.mousewheelevt,function(e){ddpowerzoomer.activeimage&&((e.detail?-120*e.detail:e.wheelDelta)<=-120?ddpowerzoomer.movemagnifier(e,!1,"out"):ddpowerzoomer.movemagnifier(e,!1,"in"),e.preventDefault())})}};jQuery.fn.addpowerzoom=function(e){var i=jQuery;return this.each(function(){if("IMG"!=this.tagName)return!0;void 0===e&&(e={}),e.largeimage&&e.largeimage.length>0&&(e.preloadimg=new Image,e.preloadimg.src=e.largeimage);var o=i(this);e.largeimagesrc=e.preloadimg?e.preloadimg.src:o.attr("src"),parseInt(this.style.width)>0&&parseInt(this.style.height)>0?ddpowerzoomer.setupimage(i,this,e):this.complete?ddpowerzoomer.setupimage(i,this,e):o.bind("load",function(){ddpowerzoomer.setupimage(i,this,e)})})},jQuery(document).ready(function(e){ddpowerzoomer.init(e)});